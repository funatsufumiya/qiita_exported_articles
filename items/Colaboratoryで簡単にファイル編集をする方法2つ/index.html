<p data-sourcepos="1:1-2:127">機械学習やPythonの習得にとても便利な<a href="https://colab.research.google.com" rel="nofollow noopener" target="_blank">Colaboratory</a>ですが、実はファイル編集だけはちょっと面倒です。<br>
そこで、今回はColaboratoryでファイル編集をする場合に便利な方法を2つピックアップしました。</p>
<ul data-sourcepos="4:1-6:0">
<li data-sourcepos="4:1-4:69">【方法1】 Google Drive + Anyfile Notepad <strong>(← おすすめ)</strong>
</li>
<li data-sourcepos="5:1-6:0">【方法2】 bashコマンド(cat, sed) <strong>(← サクッとファイル編集したいときに便利)</strong>
</li>
</ul>
<h1 data-sourcepos="7:1-7:46">
<span id="方法1-google-drive--anyfile-notepad" class="fragment"></span><a href="#%E6%96%B9%E6%B3%951-google-drive--anyfile-notepad"><i class="fa fa-link"></i></a>【方法1】 Google Drive + Anyfile Notepad</h1>
<p data-sourcepos="9:1-9:266">Google Drive連携自体は、よく使われる方法ですね。これに加えて、<a href="https://anyfile-notepad.semaan.ca/" rel="nofollow noopener" target="_blank">Anyfile Notepad</a>というGoogle Driveアプリを使うことで、どんなファイルでも簡単に編集できるようになります。</p>
<p data-sourcepos="11:1-11:311">（ちなみに、Anyfile Notepadを使わなくても、<a href="https://www.google.com/intl/ja_ALL/drive/download/" rel="nofollow noopener" target="_blank">Googleドライブファイルストリーム</a>等を使ってPCから直接編集することもできます。PC上のアプリでファイル編集したい場合はそちらがおすすめです。)</p>
<h3 data-sourcepos="13:1-13:40">
<span id="google-driveの認証とマウント" class="fragment"></span><a href="#google-drive%E3%81%AE%E8%AA%8D%E8%A8%BC%E3%81%A8%E3%83%9E%E3%82%A6%E3%83%B3%E3%83%88"><i class="fa fa-link"></i></a>Google Driveの認証とマウント</h3>
<p data-sourcepos="15:1-15:78">Google Driveをマウントするには以下のコマンドを使います。</p>
<div class="code-frame" data-lang="python" data-sourcepos="17:1-20:3"><div class="highlight"><pre><code><span class="kn">from</span> <span class="n">google.colab</span> <span class="kn">import</span> <span class="n">drive</span>
<span class="n">drive</span><span class="p">.</span><span class="nf">mount</span><span class="p">(</span><span class="sh">'</span><span class="s">/content/drive</span><span class="sh">'</span><span class="p">)</span>
</code></pre></div></div>
<p data-sourcepos="22:1-22:168">あとは以下のようなURLが表示されるので、URLを開き、最後に出てくる暗号のような文字列を入力欄にコピペすれば完了です。</p>
<p data-sourcepos="24:1-24:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F154c9a9b-31b1-c8a3-b8a6-a05926a141c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2057db5c226abc3df0d8798b84701131" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F154c9a9b-31b1-c8a3-b8a6-a05926a141c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=2057db5c226abc3df0d8798b84701131" alt="スクリーンショット 2019-10-03 13.08.49.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F154c9a9b-31b1-c8a3-b8a6-a05926a141c6.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=deb0685d45c4bc57f807dbaf3ba9a327 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/154c9a9b-31b1-c8a3-b8a6-a05926a141c6.png" loading="lazy"></a></p>
<h3 data-sourcepos="26:1-26:40">
<span id="anyfile-notepadのインストール" class="fragment"></span><a href="#anyfile-notepad%E3%81%AE%E3%82%A4%E3%83%B3%E3%82%B9%E3%83%88%E3%83%BC%E3%83%AB"><i class="fa fa-link"></i></a>Anyfile Notepadのインストール</h3>
<p data-sourcepos="28:1-28:213">Anyfile Notepadのインストールは、ブラウザ版Google Driveの右クリックメニューから、アプリの追加を選択し、Anyfile Notepadを検索すればすぐインストールできます。</p>
<p data-sourcepos="30:1-30:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F2e52d832-75bc-1d74-1063-24a69fbe9c61.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=50d83caa0c69734e1aacb569f9418d3d" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F2e52d832-75bc-1d74-1063-24a69fbe9c61.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=50d83caa0c69734e1aacb569f9418d3d" alt="スクリーンショット 2019-10-03 13.15.27.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F2e52d832-75bc-1d74-1063-24a69fbe9c61.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=c2cfb9f3cd22b70386873800872536b1 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/2e52d832-75bc-1d74-1063-24a69fbe9c61.png" loading="lazy"></a></p>
<p data-sourcepos="32:1-32:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fd05c4059-da87-43fc-ec6f-dd228b8c3428.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=182330c655303a680ba9bf738567b839" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fd05c4059-da87-43fc-ec6f-dd228b8c3428.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=182330c655303a680ba9bf738567b839" alt="スクリーンショット 2019-10-03 13.11.59.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fd05c4059-da87-43fc-ec6f-dd228b8c3428.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9dd9ec36155ebccc9ae158cf43f564f9 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/d05c4059-da87-43fc-ec6f-dd228b8c3428.png" loading="lazy"></a></p>
<p data-sourcepos="34:1-34:155">あとは、編集したいファイルを右クリックして、「アプリで開く &gt; Anyfile Notepad」を選択すればOKです。簡単ですね。</p>
<p data-sourcepos="36:1-36:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fc050e775-e52a-fc0f-65c3-cfee3b2b0fe3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3c56d77ea2de23193b69702d09fa548c" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fc050e775-e52a-fc0f-65c3-cfee3b2b0fe3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=3c56d77ea2de23193b69702d09fa548c" alt="スクリーンショット 2019-10-03 13.15.59.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fc050e775-e52a-fc0f-65c3-cfee3b2b0fe3.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=f3f9a1f1b7360d1ac2292193d857aaed 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/c050e775-e52a-fc0f-65c3-cfee3b2b0fe3.png" loading="lazy"></a></p>
<p data-sourcepos="38:1-38:172">実際にファイルを開いてみた様子です。ここでは<code>LICENSE.txt</code>を開いてみていますが、どんな拡張子のファイルでも編集できます。</p>
<p data-sourcepos="40:1-40:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fd6b3c1b9-15b7-c009-479c-f8f2261c27e1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ad80badecd0b8854cd78fe2248266f49" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fd6b3c1b9-15b7-c009-479c-f8f2261c27e1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ad80badecd0b8854cd78fe2248266f49" alt="スクリーンショット 2019-10-03 14.20.03.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fd6b3c1b9-15b7-c009-479c-f8f2261c27e1.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=80ef2c0f28d1116943ec0a97f5d2ae37 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/d6b3c1b9-15b7-c009-479c-f8f2261c27e1.png" loading="lazy"></a></p>
<p data-sourcepos="42:1-42:143">ここで1点だけ注意ですが、<strong>Google Driveでの編集が実際に反映されるのに、時間差があるときがあります。</strong></p>
<p data-sourcepos="44:1-44:179">なお、この方法を応用すれば、画像ファイルやExcelファイルも追加アプリで直接編集できるので、いろいろと応用の効く方法ですね。</p>
<p data-sourcepos="46:1-46:365">ちなみにGoogle Drive連携を使う方法には他にもいろいろメリットがあって、Colaboratory上のマシンが停止してもファイルはDriveに残るので、学習後に継続してファイルを使う場合等にとっても便利です。セッションが切れてもすぐ継続して学習を進められるのは嬉しいですね。</p>
<h2 data-sourcepos="48:1-48:44">
<span id="方法2-bashコマンド-cat-sed" class="fragment"></span><a href="#%E6%96%B9%E6%B3%952-bash%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89-cat-sed"><i class="fa fa-link"></i></a>【方法2】 bashコマンド (cat, sed)</h2>
<p data-sourcepos="50:1-50:306">Google Driveを使う方法でだいたいは事足りるのですが、ちょっとした編集のとき、毎回Google Drive上で編集するのは面倒です。（<a href="https://www.google.com/intl/ja_ALL/drive/download/" rel="nofollow noopener" target="_blank">Googleドライブファイルストリーム</a>を使えば多少は楽ですが。）</p>
<p data-sourcepos="52:1-52:136">そんなとき、<strong>Colaboratory上だけでサクッと</strong>ファイル編集したいときは、以下の方法がおすすめです。</p>
<h3 data-sourcepos="54:1-54:70">
<span id="ファイルの新規作成と中身の確認-catコマンド" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E6%96%B0%E8%A6%8F%E4%BD%9C%E6%88%90%E3%81%A8%E4%B8%AD%E8%BA%AB%E3%81%AE%E7%A2%BA%E8%AA%8D-cat%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>ファイルの新規作成と、中身の確認 (catコマンド)</h3>
<p data-sourcepos="56:1-56:184"><code>%%bash</code>や<code>!</code>で始まるセルは、bashコマンド（Linux上のコマンド）になることを活用して、<code>cat</code>コマンドを使ってファイルを新規作成します。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="58:1-67:3"><div class="highlight"><pre><code>%%bash
<span class="nb">cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt; test.txt
hello
this
is
test
file
</span><span class="no">EOF
</span></code></pre></div></div>
<p data-sourcepos="69:1-69:144">EOFからEOFの間は自由に記述できます。ファイルの中身を確認したい場合も、同じくcatコマンドを使います。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="71:1-73:3"><div class="highlight"><pre><code><span class="o">!</span><span class="nb">cat </span>test.txt <span class="c"># ちなみにcatは、catenate(連結)の意味</span>
</code></pre></div></div>
<p data-sourcepos="75:1-75:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Ffbbdf814-6b31-c662-e85a-22ae8ff5a0a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dac2cc675e636913cf21eb9b74efb99e" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Ffbbdf814-6b31-c662-e85a-22ae8ff5a0a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=dac2cc675e636913cf21eb9b74efb99e" alt="スクリーンショット 2019-10-03 13.28.40.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Ffbbdf814-6b31-c662-e85a-22ae8ff5a0a9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=75cebd2cd6ff31a935cbdab3ad4fc46c 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/fbbdf814-6b31-c662-e85a-22ae8ff5a0a9.png" loading="lazy"></a></p>
<p data-sourcepos="77:1-77:160">大抵のテキストファイルの新規作成はこれで事足りますし、<strong>ファイル全体を書き換えるときは同じ方法が使えます</strong>。</p>
<p data-sourcepos="79:1-79:385">（ちなみに蛇足ですが <code>!sudo apt install imagemagick</code> でImageMagickをインストールすれば、ちょっとした画像ファイルの作成や編集なんかもできます。もちろん<code>ffmpeg</code>とかも同様に使えますし、さらには<code>gcc</code>や<code>ruby</code>、<code>localtunnel</code>なんかもインストールできます。Colaboratoryは拡張性がすごいですね。）</p>
<h3 data-sourcepos="81:1-81:49">
<span id="ファイルの書き換え-sedコマンド" class="fragment"></span><a href="#%E3%83%95%E3%82%A1%E3%82%A4%E3%83%AB%E3%81%AE%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88-sed%E3%82%B3%E3%83%9E%E3%83%B3%E3%83%89"><i class="fa fa-link"></i></a>ファイルの書き換え (sedコマンド)</h3>
<p data-sourcepos="83:1-83:136">Colaboratory上では、EmacsやVim等の対話型エディタを開くことはできないので、<code>sed</code>コマンドを使います。</p>
<h4 data-sourcepos="85:1-85:29">
<span id="まず行番号の確認" class="fragment"></span><a href="#%E3%81%BE%E3%81%9A%E8%A1%8C%E7%95%AA%E5%8F%B7%E3%81%AE%E7%A2%BA%E8%AA%8D"><i class="fa fa-link"></i></a>まず行番号の確認</h4>
<p data-sourcepos="87:1-87:110">まず編集する前に、先ほど作成した <code>test.txt</code>を、行番号付きで中身を確認します。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="89:1-91:3"><div class="highlight"><pre><code><span class="o">!</span><span class="nb">cat</span> <span class="nt">-n</span> test.txt <span class="c"># -n はnumberの意味</span>
</code></pre></div></div>
<p data-sourcepos="93:1-93:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F62306dda-c0d8-5b13-2a40-207e10e6bc4f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9aa1e8ebb27ea4113926fc4d7a12b56f" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F62306dda-c0d8-5b13-2a40-207e10e6bc4f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9aa1e8ebb27ea4113926fc4d7a12b56f" alt="スクリーンショット 2019-10-03 13.34.56.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F62306dda-c0d8-5b13-2a40-207e10e6bc4f.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=2747aebe6f3c079803dfbed4642c3531 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/62306dda-c0d8-5b13-2a40-207e10e6bc4f.png" loading="lazy"></a></p>
<p data-sourcepos="95:1-95:231">もし表示される行数が多すぎる場合は、<code>head</code>コマンドや<code>tail</code>コマンドを使って表示行数を制限できます。（行の範囲を指定することもできますが、ここでは割愛します。）</p>
<div class="code-frame" data-lang="bash" data-sourcepos="97:1-102:3"><div class="highlight"><pre><code>%%bash
<span class="nb">cat</span> <span class="nt">-n</span> test.txt | <span class="nb">head</span> <span class="nt">-n</span> 2 <span class="c"># 最初の2行を表示</span>
<span class="nb">echo</span><span class="p">;</span> <span class="nb">echo</span> <span class="c"># 空行を2つ表示</span>
<span class="nb">cat</span> <span class="nt">-n</span> test.txt | <span class="nb">tail</span> <span class="nt">-n</span> 1 <span class="c"># 最後の1行を表示</span>
</code></pre></div></div>
<p data-sourcepos="104:1-104:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F3b3a2cb0-e351-c2bd-af04-07ed0164ed37.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b7e7df95e91b363e1aeac2bfa23358f6" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F3b3a2cb0-e351-c2bd-af04-07ed0164ed37.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b7e7df95e91b363e1aeac2bfa23358f6" alt="スクリーンショット 2019-10-03 13.37.40.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F3b3a2cb0-e351-c2bd-af04-07ed0164ed37.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=e5e0b77183ebbd21ece4a950274fa586 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/3b3a2cb0-e351-c2bd-af04-07ed0164ed37.png" loading="lazy"></a></p>
<h4 data-sourcepos="106:1-106:23">
<span id="行の書き換え" class="fragment"></span><a href="#%E8%A1%8C%E3%81%AE%E6%9B%B8%E3%81%8D%E6%8F%9B%E3%81%88"><i class="fa fa-link"></i></a>行の書き換え</h4>
<p data-sourcepos="108:1-108:88">では早速、<code>sed</code>コマンドを使って、2行目を<code>world</code>に書き換えます。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="110:1-115:3"><div class="highlight"><pre><code>%%bash
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s2">"2c world"</span> test.txt <span class="c"># ここで、2c は2行目を書き換える (change) の意味</span>

<span class="nb">cat</span> <span class="nt">-n</span> test.txt <span class="c"># 結果の確認</span>
</code></pre></div></div>
<p data-sourcepos="117:1-117:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fc9c64e78-0af2-cd1a-c99d-713bd057eb52.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ea3d6d6cc9687ea2691e0f4b44432b81" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fc9c64e78-0af2-cd1a-c99d-713bd057eb52.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ea3d6d6cc9687ea2691e0f4b44432b81" alt="スクリーンショット 2019-10-03 14.15.51.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2Fc9c64e78-0af2-cd1a-c99d-713bd057eb52.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=fc86d4b8caa45f29116e079499c1a29a 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/c9c64e78-0af2-cd1a-c99d-713bd057eb52.png" loading="lazy"></a></p>
<p data-sourcepos="120:1-120:84">書き換わりました。行番号の確認さえできれば、簡単ですね。</p>
<p data-sourcepos="122:1-122:229">（ちなみに<code>sed</code>は<strong>s</strong>tream <strong>ed</strong>itorの略です。<code>-i -e</code>オプションはそれぞれ、<code>--in-place --expression</code>の略で、ファイルの置き換えと実行コマンドを示すオプションの意味です。）</p>
<h3 data-sourcepos="124:1-124:16">
<span id="行の挿入" class="fragment"></span><a href="#%E8%A1%8C%E3%81%AE%E6%8C%BF%E5%85%A5"><i class="fa fa-link"></i></a>行の挿入</h3>
<p data-sourcepos="126:1-126:116">ちなみに挿入したいときは、<code>c</code> (change) の代わりに <code>i</code> (insert) や <code>a</code> (append) を使います。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="128:1-133:3"><div class="highlight"><pre><code>%%bash
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s2">"2i great"</span> test.txt <span class="c"># 2行目にgreatを挿入する</span>

<span class="nb">cat</span> <span class="nt">-n</span> test.txt <span class="c"># 結果の確認</span>
</code></pre></div></div>
<p data-sourcepos="135:1-135:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F380aa468-d480-556e-23cd-e0abc04d90ee.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=45c34b6414dd515a1bdea19ae44bd556" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F380aa468-d480-556e-23cd-e0abc04d90ee.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=45c34b6414dd515a1bdea19ae44bd556" alt="スクリーンショット 2019-10-03 13.52.18.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F380aa468-d480-556e-23cd-e0abc04d90ee.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8b982e200f8dc42a5d00d47ee5df1215 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/380aa468-d480-556e-23cd-e0abc04d90ee.png" loading="lazy"></a></p>
<div class="code-frame" data-lang="bash" data-sourcepos="137:1-142:3"><div class="highlight"><pre><code>%%bash
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s2">"2a and wonderful"</span> test.txt <span class="c"># 2行目の次に、and wonderfulを挿入する</span>

<span class="nb">cat</span> <span class="nt">-n</span> test.txt <span class="c"># 結果の確認</span>
</code></pre></div></div>
<p data-sourcepos="144:1-144:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F1c441895-193c-4bf9-193c-dd451e27bdc9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5f9776ab545c37481e60cd8e5601057d" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F1c441895-193c-4bf9-193c-dd451e27bdc9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5f9776ab545c37481e60cd8e5601057d" alt="スクリーンショット 2019-10-03 13.53.10.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F1c441895-193c-4bf9-193c-dd451e27bdc9.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=768be6a8e176d77461a1bb33b6e6c858 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/1c441895-193c-4bf9-193c-dd451e27bdc9.png" loading="lazy"></a></p>
<h3 data-sourcepos="146:1-146:16">
<span id="行の削除" class="fragment"></span><a href="#%E8%A1%8C%E3%81%AE%E5%89%8A%E9%99%A4"><i class="fa fa-link"></i></a>行の削除</h3>
<p data-sourcepos="148:1-148:55">削除するときは、<code>d</code> (delete) を使います。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="150:1-155:3"><div class="highlight"><pre><code>%%bash
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s2">"5,7d"</span> test.txt <span class="c"># 5〜7行目を削除する</span>

<span class="nb">cat</span> <span class="nt">-n</span> test.txt <span class="c"># 結果の確認</span>
</code></pre></div></div>
<p data-sourcepos="157:1-157:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F59bac9ab-d8d2-3799-8baf-14981f641b6d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5668312cabb2fbe3c20361db9a61c421" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F59bac9ab-d8d2-3799-8baf-14981f641b6d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5668312cabb2fbe3c20361db9a61c421" alt="スクリーンショット 2019-10-03 13.54.38.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F59bac9ab-d8d2-3799-8baf-14981f641b6d.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=8e06114388899ab97f27dfbf9e2752bb 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/59bac9ab-d8d2-3799-8baf-14981f641b6d.png" loading="lazy"></a></p>
<h3 data-sourcepos="159:1-159:28">
<span id="文字列の置き換え" class="fragment"></span><a href="#%E6%96%87%E5%AD%97%E5%88%97%E3%81%AE%E7%BD%AE%E3%81%8D%E6%8F%9B%E3%81%88"><i class="fa fa-link"></i></a>文字列の置き換え</h3>
<p data-sourcepos="161:1-161:74">文字列を置き換えるときは、<code>s</code> (substitute) を使います。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="163:1-168:3"><div class="highlight"><pre><code>%%bash
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s2">"1s/hello/good morning/"</span> test.txt <span class="c"># 1行目のhelloをgood morningに置き換える</span>

<span class="nb">cat</span> <span class="nt">-n</span> test.txt <span class="c"># 結果の確認</span>
</code></pre></div></div>
<p data-sourcepos="170:1-170:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F49808f13-c15a-533c-c7e7-8df73cfe52ad.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b34d6773eda731a9f7a810b7f6b41032" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F49808f13-c15a-533c-c7e7-8df73cfe52ad.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=b34d6773eda731a9f7a810b7f6b41032" alt="スクリーンショット 2019-10-03 13.57.32.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F49808f13-c15a-533c-c7e7-8df73cfe52ad.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=141530f14b362c97c11346a000b7f27d 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/49808f13-c15a-533c-c7e7-8df73cfe52ad.png" loading="lazy"></a></p>
<p data-sourcepos="172:1-172:78">ちなみにファイル全体の中で置き換えることもできます。</p>
<div class="code-frame" data-lang="bash" data-sourcepos="174:1-179:3"><div class="highlight"><pre><code>%%bash
<span class="nb">sed</span> <span class="nt">-i</span> <span class="nt">-e</span> <span class="s2">"s/d/D/g"</span> test.txt <span class="c"># dをDに置き換える</span>

<span class="nb">cat</span> <span class="nt">-n</span> test.txt <span class="c"># 結果の確認</span>
</code></pre></div></div>
<p data-sourcepos="181:1-181:162"><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F8996c695-82a6-80ab-e19d-484b26026f25.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=db005b866fbcf5390ab070e7c77bdf8d" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F8996c695-82a6-80ab-e19d-484b26026f25.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=db005b866fbcf5390ab070e7c77bdf8d" alt="スクリーンショット 2019-10-03 13.59.00.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.ap-northeast-1.amazonaws.com%2F0%2F44103%2F8996c695-82a6-80ab-e19d-484b26026f25.png?ixlib=rb-4.0.0&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=5d81ed3b2cf17a75fadbfcdf1f0dc9f2 1x" data-canonical-src="https://qiita-image-store.s3.ap-northeast-1.amazonaws.com/0/44103/8996c695-82a6-80ab-e19d-484b26026f25.png" loading="lazy"></a></p>
<p data-sourcepos="183:1-183:18">便利ですね。</p>
<p data-sourcepos="185:1-185:360">なんだか後半は単なる<code>sed</code>コマンド講座になってしまいましたが、<code>sed</code>コマンドはこういう対話シェルが使えない環境では本領発揮しますね。これを応用すれば、<code>awk</code>コマンドなんかも組み合わせて、テキストファイルをまとめて編集するときなんかに活躍しそうです。</p>
